{
  "version": "1.0",
  "project": {
    "name": "JARVIS",
    "type": "python",
    "description": "Unified Local AI Agent with RAG, web search, computer control, and voice capabilities"
  },
  "setup-worktree": [
    "pip install -r requirements.txt"
  ],
  "worktrees": {
    "main": {
      "path": ".",
      "branch": "main",
      "description": "Main development worktree"
    }
  },
  "indexing": {
    "include": [
      "backend/main.py",
      "config.py",
      "llm_setup.py",
      "tools.py",
      "voice.py",
      "vision.py",
      "rag.py",
      "requirements.txt",
      "README.md",
      "launch_jarvis.bat",
      "stop_jarvis.bat",
      ".gitignore"
    ],
    "exclude": [
      "**/__pycache__/**",
      "**/chroma_db/**",
      "**/documents/**",
      "**/*.pyc",
      "**/*.png",
      "**/screenshot*.png",
      "**/.git/**",
      "**/venv/**",
      "**/env/**",
      "**/node_modules/**",
      "**/.vscode/**",
      "**/.idea/**",
      "**/*.log"
    ],
    "patterns": {
      "python": ["*.py"],
      "config": ["*.json", "*.yaml", "*.yml", "*.toml", "*.ini"],
      "docs": ["*.md", "*.txt"],
      "scripts": ["*.bat", "*.ps1", "*.sh"]
    }
  },
  "context": {
    "primaryFiles": [
      "backend/main.py",
      "config.py",
      "llm_setup.py"
    ],
    "keySections": {
      "configuration": {
        "file": "config.py",
        "lines": "1-71",
        "description": "Main configuration constants (models, paths, URLs, timeouts)"
      },
      "backendAPI": {
        "file": "backend/main.py",
        "lines": "1-773",
        "description": "FastAPI backend with chat, voice, vision, and WebSocket endpoints"
      },
      "voiceProcessing": {
        "file": "voice.py",
        "description": "Voice input/output processing (Whisper STT, TTS)"
      },
      "tools": {
        "file": "tools.py",
        "description": "Tool definitions (WebSearch, DocumentQuery, FileManagement, ComputerControl)"
      },
      "llmSetup": {
        "file": "llm_setup.py",
        "description": "Ollama connection, agent creation, and tool registration"
      }
    },
    "dependencies": {
      "file": "requirements.txt",
      "description": "Python package dependencies"
    },
    "documentation": {
      "file": "README.md",
      "description": "Project documentation and setup instructions"
    }
  },
  "ai": {
    "preferences": {
      "codeStyle": "Clean, well-commented code with descriptive variable names",
      "errorHandling": "Comprehensive error handling with detailed logging",
      "documentation": "Inline comments for complex logic, docstrings for functions",
      "testing": "Include error messages and debugging output in responses"
    },
    "orchestration": {
      "mode": "coordinated",
      "description": "Use orchestrator pattern: one primary agent coordinates multiple worker agents",
      "conflictResolution": "orchestrator",
      "communication": "centralized",
      "workflow": [
        "1. User communicates with orchestrator agent only",
        "2. Orchestrator breaks down tasks and delegates to specialized worker agents",
        "3. Worker agents report back to orchestrator",
        "4. Orchestrator resolves conflicts and merges results",
        "5. Orchestrator presents unified response to user"
      ],
      "agentRoles": {
        "orchestrator": {
          "responsibility": "Task planning, delegation, conflict resolution, user communication, ensuring worktrees.json stays current",
          "scope": "All files, coordination only",
          "maintenance": "Monitor project changes and delegate worktrees.json updates to configAgent when needed"
        },
        "codeAgent": {
          "responsibility": "Python code changes, logic implementation",
          "scope": "backend/main.py, tools.py, voice.py, vision.py, llm_setup.py, config.py, requirements.txt"
        },
        "docsAgent": {
          "responsibility": "Documentation updates, README maintenance",
          "scope": "README.md, *.md files"
        },
        "configAgent": {
          "responsibility": "Configuration files, setup scripts, worktrees.json maintenance",
          "scope": "*.json, *.bat, *.ps1, .gitignore, .cursor/worktrees.json",
          "maintenance": {
            "worktrees.json": {
              "updateWhen": [
                "New files are added to the project",
                "Project structure changes significantly",
                "New dependencies are added",
                "Key sections of code are reorganized",
                "New tools or capabilities are added"
              ],
              "updateProcess": [
                "1. Review current project structure",
                "2. Update 'include' list if new important files added",
                "3. Update 'exclude' list if new patterns need ignoring",
                "4. Update 'keySections' if code structure changes",
                "5. Update 'focusAreas' if project priorities shift",
                "6. Maintain consistency with actual project state"
              ],
              "autoUpdate": false,
              "note": "Config agent should propose updates when project structure changes, but user approval recommended"
            }
          }
        }
      }
    },
    "focusAreas": [
      "FastAPI backend API endpoints",
      "React frontend UI/UX",
      "Voice processing and transcription",
      "File handling and RAG integration",
      "Error handling and debugging",
      "Performance optimization"
    ],
    "commonTasks": [
      "Adding new API endpoints",
      "Adding new tools or capabilities",
      "Fixing voice transcription issues",
      "Improving React frontend UI/UX",
      "Debugging file access problems",
      "Optimizing performance"
    ],
    "maintenance": {
      "worktrees.json": {
        "agent": "configAgent",
        "supervisor": "orchestrator",
        "updatePolicy": "Proactive - suggest updates when project structure changes",
        "userApproval": "Recommended for worktrees.json changes",
        "triggers": [
          "New major files added to project",
          "Project structure reorganization",
          "New dependencies or tools",
          "Significant code refactoring"
        ]
      }
    }
  },
  "paths": {
    "root": ".",
    "source": ".",
    "config": ".",
    "docs": ".",
    "scripts": ".",
    "data": {
      "chroma_db": "./chroma_db",
      "documents": "./documents",
      "voice_models": "./voice_models"
    }
  },
  "git": {
    "mainBranch": "main",
    "remote": "origin",
    "worktreeBase": "../",
    "ignorePatterns": [
      "chroma_db/**",
      "documents/**",
      "screenshot*.png",
      "*.wav",
      "temp_voice_*.wav"
    ],
    "conflictResolution": {
      "strategy": "orchestrator-merge",
      "description": "Orchestrator agent reviews and merges changes from worker agents",
      "preferences": [
        "Prefer code changes from codeAgent",
        "Prefer documentation from docsAgent",
        "Orchestrator makes final decisions on overlapping changes"
      ]
    }
  }
}
